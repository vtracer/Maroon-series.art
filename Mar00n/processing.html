<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="css/maya.css?v=1">
  <link rel="stylesheet" href="css/lyrics.css?v=1">
  <link rel="stylesheet" href="css/elias_reiss.css?v=1">
  <link rel="stylesheet" href="css/maroon-glitch.css?v=1">
  <script defer src="js/maroon-glitch.js"></script>
  <title>MAR00N // Chapter 01: #PROCESSING</title>
  <style>
    :root {
      --nlt-gold: #ffb000;
      --nlt-violet: #8b00ff;
      --nlt-bg: #050505;
      --nlt-text: #d1d1d1;
      --nlt-dim: #444;
    }

    body, html {
      background-color: var(--nlt-bg);
      color: var(--nlt-text);
      font-family: 'Courier New', Courier, monospace;
      margin: 0;
      padding: 0;
      overflow-x: hidden;
    }

    body::before {
      content: " ";
      display: block;
      position: fixed;
      top: 0; left: 0; bottom: 0; right: 0;
      background:
        linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.25) 50%),
        linear-gradient(90deg, rgba(255, 0, 0, 0.06), rgba(0, 255, 0, 0.02), rgba(0, 0, 255, 0.06));
      z-index: 2;
      background-size: 100% 4px, 3px 100%;
      pointer-events: none;
    }

    header {
      border-bottom: 1px solid var(--nlt-dim);
      padding: 10px 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: #000;
    }

    nav a {
      color: var(--nlt-gold);
      text-decoration: none;
      margin-left: 20px;
      font-size: 0.8rem;
      text-transform: uppercase;
      letter-spacing: 2px;
    }

    #viewport {
      padding: 40px 20px;
      max-width: 800px;
      margin: auto;
      position: relative;
    }

    /* Background image for the pod interior (50% opacity) */
    #viewport::before{
      content: '';
      position: absolute;
      inset: 0;
      background-image: url('pod_background.png');
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      opacity: 0.10;
      pointer-events: none;
      z-index: 0;
      filter: brightness(0.85) contrast(0.98);
    }

    /* ensure viewport children render above the background image */
    #viewport > * { position: relative; z-index: 1; }

    /* Terminal-style status box (slick corporate + cyberpunk) */
    .status-bar {
      padding: 16px 18px;
      margin-bottom: 40px;
      border-radius: 8px;
      position: relative;
      background:
        linear-gradient(180deg, rgba(10,10,10,0.28), rgba(0,0,0,0.36)),
        linear-gradient(90deg, rgba(255,186,90,0.02), rgba(255,176,0,0.06));
      border: 1px solid rgba(255,176,0,0.72);
      box-shadow:
        0 6px 18px rgba(0,0,0,0.6),        /* outer depth */
        inset 0 1px 0 rgba(255,255,255,0.02), /* subtle inner rim */
        0 0 28px rgba(255,176,0,0.06);      /* faint ambient glow */
      backdrop-filter: blur(4px) saturate(110%);
      overflow: visible;
    }

    /* sheen stripe for corporate polish */
    .status-bar::after{
      content: '';
      position: absolute;
      left: -2%; top: 0;
      width: 104%; height: 28%;
      background: linear-gradient(90deg, rgba(255,255,255,0.06), rgba(255,255,255,0.0));
      transform: skewY(-6deg);
      pointer-events: none;
      mix-blend-mode: overlay;
      border-radius: 6px 6px 0 0;
      opacity: 0.9;
    }

    /* Shared counter style for PROCESS NODE and RUNTIME (orange terminal text) */
    .terminal-counter,
    .counter {
      color: var(--nlt-gold);
      font-weight: 800;
      font-size: 1.16rem;
      font-family: 'Courier New', Courier, monospace;
      letter-spacing: 1px;
      text-shadow: 0 0 12px rgba(255,176,0,0.28), 0 0 32px rgba(255,176,0,0.06);
      -webkit-font-smoothing: antialiased;
      display: inline-block;
    }

    /* small accent line on the left to suggest UI panel */
    .status-bar::before{
      content: '';
      position: absolute;
      left: 0; top: 6px;
      width: 6px; height: calc(100% - 12px);
      background: linear-gradient(180deg, rgba(255,200,100,0.95), rgba(255,160,0,0.9));
      border-radius: 3px 0 0 3px;
      box-shadow: 0 0 18px rgba(255,176,0,0.12);
      pointer-events: none;
    }

    h1 {
      color: var(--nlt-violet);
      border-left: 4px solid var(--nlt-violet);
      padding-left: 15px;
      letter-spacing: 5px;
      text-transform: uppercase;
    }

    .manuscript-text {
      line-height: 1.8;
      font-size: 1.1rem;
      white-space: normal;
    }

	.manuscript-text .span-mark.block{
  display: block;
  margin: 0 0 10px 0;
}
/* Subtle links (no underline, small color shift) */
a{
  color: rgba(255,176,0,.78);     /* soft amber */
  text-decoration: none;
}

a:hover,
a:focus-visible{
  color: rgba(255,176,0,.92);
  text-decoration: none;
}

/* If you want them even less obvious inside body copy */
.manuscript-text a{
  color: rgba(234,238,247,.78);   /* barely different from text */
  border-bottom: 1px solid rgba(255,176,0,.18); /* optional “hint” underline */
}

.manuscript-text a:hover,
.manuscript-text a:focus-visible{
  color: rgba(234,238,247,.92);
  border-bottom-color: rgba(255,176,0,.32);
}
    .highlight {
      background-color: var(--nlt-violet);
      color: white;
      padding: 0 5px;
    }

    /* `.glitch` and `.blink-word` styles moved to css/maroon-glitch.css */

    /* Optional: style your converted spans so you can see them */
    .span-mark {
      /* uncomment if you want debug visibility */
      /* outline: 1px dashed rgba(255,176,0,.22); */
    }

    #processing-target {
      margin-top: 50px;
      border: 1px dashed var(--nlt-gold);
      padding: 20px;
      color: var(--nlt-gold);
      background: rgba(255, 176, 0, 0.05);
    }

    footer {
      margin-top: 100px;
      padding: 40px;
      text-align: center;
      border-top: 1px solid var(--nlt-dim);
      font-size: 0.7rem;
      color: var(--nlt-dim);
    }

    /* MAR00N footer styles (copied/implemented for processing.html) */
    .maroon-footer{
      margin-top: 60px;
      padding: 28px 20px;
      text-align: center;
      border-top: 1px solid rgba(255,255,255,0.04);
      color: var(--nlt-dim);
      background: transparent;
    }

    .maroon-footer .maroon-home{
      display:inline-flex;
      flex-direction:column;
      gap:2px;
      align-items:center;
      text-decoration:none;
      color: var(--nlt-text);
      font-weight:700;
      letter-spacing:2px;
    }

    .maroon-footer .maroon-mark{
      font-size:1rem;
      display:inline-block;
      color: #ffffff; /* ensure MAR00N appears white */
      text-shadow: 0 0 10px rgba(255,255,255,0.9), 0 0 18px rgba(255,240,200,0.08);
      -webkit-text-fill-color: #ffffff;
    }

    .maroon-footer .maroon-sub{
      display:block;
      font-size:0.75rem;
      color: var(--nlt-dim);
      font-weight:400;
      letter-spacing:1px;
      margin-top:-2px;
    }

    .maroon-footer .maroon-home:hover .maroon-mark{ text-decoration:underline; }
    
    .nlt-prop{
  margin: 18px 0 22px;
  padding: 16px 16px 14px;
  border-radius: 14px;
  border: 1px solid rgba(255,176,0,.28);
  background: linear-gradient(180deg, rgba(255,176,0,.08), rgba(0,0,0,.22));
  box-shadow: 0 18px 60px rgba(0,0,0,.55);
}

/* “Outside the screen” printed ad poster */
.outside-ad{
  margin: 22px 0 26px;
  padding: 18px 18px 16px;
  border-radius: 10px;

  /* paper stock */
  background: linear-gradient(180deg, #f4f1e8 0%, #ece6d8 100%);
  color: #141414;

  /* physical separation */
  box-shadow:
    0 22px 70px rgba(0,0,0,.75),
    0 2px 0 rgba(255,255,255,.25) inset;
  border: 1px solid rgba(0,0,0,.18);

  /* make it feel “placed” */
  transform: rotate(-1.2deg);
  position: relative;
  isolation: isolate; /* keeps blend effects contained */
}

/* paper grain + subtle halftone */
.outside-ad::before{
  content:"";
  position:absolute;
  inset:0;
  border-radius: inherit;
  pointer-events:none;

  background:
    radial-gradient(circle at 20% 15%, rgba(0,0,0,.10), transparent 42%),
    radial-gradient(circle at 80% 25%, rgba(0,0,0,.08), transparent 45%),
    radial-gradient(circle at 35% 85%, rgba(0,0,0,.06), transparent 50%),
    repeating-linear-gradient(90deg, rgba(0,0,0,.03) 0 1px, transparent 1px 3px);
  mix-blend-mode: multiply;
  opacity: .55;
}

/* tape corners (no text, just vibe) */
.outside-ad::after{
  content:"";
  position:absolute;
  inset:-10px -6px auto auto;
  width: 74px;
  height: 26px;
  background: rgba(240,232,210,.85);
  border: 1px solid rgba(0,0,0,.12);
  box-shadow: 0 10px 25px rgba(0,0,0,.25);
  transform: rotate(12deg);
  border-radius: 6px;
  pointer-events:none;
  opacity: .95;
}

/* big ad typography: NOT your mono UI font */
.outside-ad__headline{
  font-family: Impact, Haettenschweiler, "Arial Black", system-ui, sans-serif;
  text-transform: uppercase;
  letter-spacing: 1px;
  font-size: clamp(1.15rem, 2.6vw, 1.75rem);
  line-height: 1.05;
}

/* softer third line, still print */
.outside-ad__sub{
  margin-top: 10px;
  font-family: Georgia, "Times New Roman", Times, serif;
  font-size: 1.05rem;
  line-height: 1.25;
  letter-spacing: .2px;
}

/* optional: make it feel like it’s “hovering over” the UI slightly */
.outside-ad{
  filter: saturate(0.95) contrast(1.02);
}

.music-cue{
  margin: 14px 0 18px;
  padding: 10px 12px;
  border-radius: 12px;
  border: 1px solid rgba(255,176,0,.26);
  background: rgba(255,176,0,.06);
  overflow: hidden;

  box-shadow: 0 18px 60px rgba(0,0,0,.55);
}

.music-cue__track{
  display: inline-flex;
  gap: 18px;
  white-space: nowrap;

  color: rgba(255,176,0,.96);
  font-weight: 900;
  letter-spacing: 1.6px;
  text-transform: uppercase;
  text-shadow: 0 0 18px rgba(255,176,0,.18);

  /* one-time “scroll in” */
  transform: translateX(110%);
  animation: cueIn 900ms cubic-bezier(.2,.9,.2,1) forwards;
}

@keyframes cueIn{
  to { transform: translateX(0); }
}

/* Optional: make it keep crawling like a ticker after it lands */
.music-cue.loop .music-cue__track{
  animation:
    cueIn 900ms cubic-bezier(.2,.9,.2,1) forwards,
    cueScroll 14s linear 1.1s infinite;
}

@keyframes cueScroll{
  from { transform: translateX(0); }
  to   { transform: translateX(-55%); }
}

.manuscript-text > *{
  margin: 0 0 12px 0;
}

.manuscript-text .span-mark.block{
  display:block;
  margin: 0 0 12px 0;
}

/* Architect wrap with binary drip effect */
.architect-wrap {
  position: relative;
  display: inline-block;
  margin: 0; /* remove extra spacing so binary can drip into next line */
  vertical-align: baseline;
  line-height: 1; /* tighten the container height */
}

.architect-speech {
  display: inline-block;
  position: relative;
  color: #2fb8ff; /* bright blue for Architect text */
  font-weight: bold;
  margin: 0; /* keep speech tightly coupled to its container */
  padding-bottom: 0;
  text-shadow: 0 0 8px rgba(47,184,255,0.12);
  z-index: 3;
  background: transparent;
}

/* Binary stream drip animation - positioned so it appears to ooze from the line */
.bin-stream {
  position: absolute;
  /* pull the streams up so they visually drip from the line */
  top: calc(100% - 28px); /* nudged closer to the text */
  left: 0;
  display: inline-block;
  color: #2fb8ff; /* match Architect text color */
  font-size: 0.82rem; /* slightly smaller so it reads as drizzle */
  letter-spacing: 1.4px;
  font-weight: 600;
  line-height: 1;
  white-space: nowrap;
  pointer-events: none;
  z-index: 2; /* sit just behind the speech */
  background: transparent; /* ensure no block background */
  text-shadow: 0 0 6px rgba(47,184,255,0.10);
}

/* horizontal offsets so streams don't overlap exactly */
.bin-stream.b1 { left: 0;     animation: dripDown 4.8s linear infinite; opacity: 0.95; }
.bin-stream.b2 { left: 5.2ch;  animation: dripDown 4.8s linear infinite; animation-delay: 0.4s; opacity: 0.8; }
.bin-stream.b3 { left: 10.8ch; animation: dripDown 4.8s linear infinite; animation-delay: 0.9s; opacity: 0.65; }

@keyframes dripDown {
  0% {
    opacity: 1;
    transform: translateY(-20px) rotate(0deg) scaleY(1);
  }
  55% {
    opacity: 1;
    transform: translateY(10px) rotate(-0.35deg) scaleY(1.01);
  }
  100% {
    opacity: 0;
    transform: translateY(24px) rotate(-0.7deg) scaleY(1.02);
  }
}

/* Heartbeat text style (two quick beats, pause) */
.heartbeat {
  color: #ff2b2b;
  font-weight: 900;
  display: inline-block;
  transform-origin: center;
  text-shadow: 0 0 8px rgba(255,43,43,0.18);
  animation: heartbeat 2.2s infinite ease-in-out;
}

@keyframes heartbeat {
  0%   { transform: scale(1); color: #8b0000; }
  6%   { transform: scale(1.45); color: #ff3b3b; }
  12%  { transform: scale(1); color: #8b0000; }
  18%  { transform: scale(1.25); color: #ff4d4d; }
  26%  { transform: scale(1); color: #8b0000; }
  100% { transform: scale(1); color: #8b0000; }
}

/* pull the next paragraph up so the drip doesn't hit the gap */
.architect-wrap + .span-mark.block {
  margin-top: 2px;
}

/* Bright star blaze — visible white light */
.alive-star{
  display: inline-block;
  position: relative;
  color: #ffffff;
  font-weight: 900;
  text-shadow:
    0 0 8px rgba(255,255,255,0.95),
    0 0 18px rgba(255,250,240,0.55),
    0 0 32px rgba(255,220,150,0.25);
  -webkit-text-fill-color: #fff;
}

.alive-star::after{
  content: '';
  position: absolute;
  left: 50%; top: 50%;
  transform: translate(-50%,-50%);
  width: 200%; height: 200%;
  pointer-events: none;
  background: radial-gradient(circle at 50% 40%, rgba(255,255,255,0.95) 0%, rgba(255,255,255,0.7) 8%, rgba(255,240,200,0.25) 20%, rgba(0,0,0,0) 45%);
  filter: blur(8px);
  mix-blend-mode: screen;
  opacity: 0.95;
  animation: starBurst 1.6s infinite ease-in-out;
}

@keyframes starBurst{
  0% { transform: translate(-50%,-50%) scale(0.96); opacity: 0.9; }
  40% { transform: translate(-50%,-54%) scale(1.06); opacity: 1; }
  100% { transform: translate(-50%,-50%) scale(0.98); opacity: 0.92; }
}

/* Outline/stroke for high-contrast readabilty */
.alive-star{
  -webkit-text-stroke: 1px rgba(255,255,255,0.55);
  text-stroke: 1px rgba(255,255,255,0.55);
}

/* Per-letter staggered animation to make the word feel tactile */
.alive-star .char{
  display: inline-block;
  transform-origin: center;
  animation: charRise 1.6s infinite ease-in-out;
}
.alive-star .char:nth-child(1){ animation-delay: 0s; }
.alive-star .char:nth-child(2){ animation-delay: 0.05s; }
.alive-star .char:nth-child(3){ animation-delay: 0.10s; }
.alive-star .char:nth-child(4){ animation-delay: 0.15s; }
.alive-star .char:nth-child(5){ animation-delay: 0.20s; }

@keyframes charRise{
  0% { transform: translateY(0) scale(1); }
  35% { transform: translateY(-6px) scale(1.06); }
  100% { transform: translateY(0) scale(1); }
}

/* Sparks */
.alive-star{ position: relative; }
.spark{ position: absolute; width:6px; height:6px; border-radius:50%; pointer-events:none; background: radial-gradient(circle, #fff 0%, #fff8d0 35%, #ffd28a 65%, rgba(255,140,0,0.9) 100%); filter: blur(.8px); animation: sparkUp 800ms forwards; mix-blend-mode: screen; }
@keyframes sparkUp{ 0% { opacity: 1; transform: translateY(0) scale(1); } 60% { opacity: 0.9; transform: translateY(-14px) scale(.8); } 100% { opacity: 0; transform: translateY(-30px) scale(.5); } }

/* Additional emphasis animations suggested by user */

/* She waited. - slow fade + float */
.waited { opacity: 0; display: inline-block; transform: translateY(6px); animation: waitedIn 2.2s ease forwards; }
@keyframes waitedIn { to { opacity: 1; transform: translateY(0); } }

/* Silence… - animated ellipsis */
.silence { display: inline-block; }
.silence .dots::after { content: ''; display:inline-block; width:1ch; text-align:left; animation: ellip 2s steps(3,end) infinite; }
@keyframes ellip { 0% { content: ''; } 33% { content: '.'; } 66% { content: '..'; } 100% { content: '...'; } }

/* Architect title - replaced slide with toxic gas effect (no slide-in) */
.architect-title { display:inline-block; position: relative; }
.architect-title::after { content:''; position:absolute; left:0; right:0; top:-6px; bottom:-6px; pointer-events:none; box-shadow: 0 0 16px rgba(47,184,255,0.04); border-radius:2px; mix-blend-mode: screen; opacity:.9; }

/* Toxic green gas floating up from text */
.toxic-gas { position: relative; display:inline-block; }
.toxic-gas .gas{ position: absolute; bottom: 6%; pointer-events: none; border-radius: 50%; mix-blend-mode: screen; background: radial-gradient(circle at 35% 35%, rgba(200,255,150,0.95) 0%, rgba(120,230,90,0.6) 40%, rgba(50,180,50,0.25) 65%, rgba(0,0,0,0) 100%); filter: blur(4px); opacity: .95; transform-origin: center; animation: gasRise 2600ms cubic-bezier(.2,.9,.2,1) forwards; }

@keyframes gasRise{
  0% { transform: translateY(0) scale(1); opacity: 0.95; filter: blur(3px); }
  30% { transform: translateY(-18px) scale(1.1); opacity: 0.9; }
  70% { transform: translateY(-40px) scale(1.5) translateX(6px); opacity: 0.45; filter: blur(6px); }
  100% { transform: translateY(-60px) scale(1.9) translateX(12px); opacity: 0; filter: blur(10px); }
}

/* smaller lateral sway for variation */
.toxic-gas .gas.sway{ animation-name: gasRise, gasSway; animation-duration: 2600ms, 1600ms; animation-fill-mode: forwards; animation-timing-function: cubic-bezier(.2,.9,.2,1), ease-in-out; }
@keyframes gasSway{ 0%{ transform: translateX(0) } 50%{ transform: translateX(6px) } 100%{ transform: translateX(-6px) } }

/* Architect quote glitch */
.arch-quote { position: relative; display:inline-block; }
.arch-quote::before, .arch-quote::after{ content: attr(data-text); position:absolute; left:0; top:0; color: rgba(255,255,255,0.06); transform-origin:left; pointer-events:none; }
.arch-quote::before{ transform: translate(2px,-1px) skewX(-6deg); }
.arch-quote::after{ transform: translate(-2px,1px) skewX(6deg); }
.arch-quote.glitching::before{ animation: smallGlitch 420ms ease-in-out infinite; }
.arch-quote.glitching::after{ animation: smallGlitch2 520ms ease-in-out infinite; }
@keyframes smallGlitch{ 0%{opacity:.06; transform:translate(2px,-1px)} 50%{opacity:.35; transform:translate(8px,-6px) skewX(-8deg)} 100%{opacity:.06; transform:translate(2px,-1px)} }
@keyframes smallGlitch2{ 0%{opacity:.06; transform:translate(-2px,1px)} 50%{opacity:.28; transform:translate(-8px,6px) skewX(6deg)} 100%{opacity:.06; transform:translate(-2px,1px)} }

/* slice reveal */
.slice-reveal{ display:inline-block; position:relative; overflow:hidden; }
.slice-reveal .mask{ display:inline-block; transform: translateX(-100%); animation: sliceIn 900ms ease forwards; }
@keyframes sliceIn{ to { transform: translateX(0); } }

/* viral micro-glitch */
.viral { display:inline-block; animation: viralJitter 1.1s infinite linear; }
@keyframes viralJitter{ 0%{ transform:none } 20%{ transform: translateX(1px) } 40%{ transform: translateX(-1px) } 60%{ transform: translateY(1px) } 80%{ transform: translateY(-1px) } 100%{ transform:none } }

/* Soft Collapse - compress then rebound */
.soft-collapse { display:inline-block; animation: softCollapse 1.1s ease-in-out; }
@keyframes softCollapse{ 0%{ transform: scaleY(1) } 40%{ transform: scaleY(.84) scaleX(1.02) } 100%{ transform: scaleY(1) } }

/* desaturate blur for grief lines */
.fade-grief { color: rgba(209,209,209,0.9); filter: none; animation: griefWash 3s forwards; }
@keyframes griefWash{ to { filter: saturate(.5) blur(.6px); color: rgba(209,209,209,.6); } }

/* pop bloom */
.pop-bloom{ display:inline-block; transform-origin:center; animation: popBloom 600ms cubic-bezier(.2,.9,.2,1); }
@keyframes popBloom{ 0%{ transform: scale(.9); filter: brightness(1.1); opacity:0 } 60%{ transform: scale(1.08); filter: brightness(1.6); opacity:1 } 100%{ transform: scale(1); filter: none; opacity:1 } }

/* flicker */
.flicker{ animation: flick 700ms infinite; }
@keyframes flick{ 0%{opacity:1} 10%{opacity:.1} 20%{opacity:.95} 30%{opacity:.12} 50%{opacity:1} 100%{opacity:1} }

/* pulse counter synced subtle */
.pulse-counter{ display:inline-block; animation: counterPulse 2.2s infinite; }
@keyframes counterPulse{ 0%{ transform: scale(1); text-shadow:0 0 8px rgba(255,176,0,0.12) } 6%{ transform: scale(1.03); text-shadow:0 0 16px rgba(255,176,0,0.28) } 100%{ transform: scale(1); } }

/* Force-visible alive state when toggled */
.alive-star.alive-visible{
  color: #ffffff !important;
  -webkit-text-stroke: 1px rgba(255,255,255,0.9) !important;
  text-stroke: 1px rgba(255,255,255,0.9) !important;
  text-shadow: 0 0 14px rgba(255,255,255,1) !important, 0 0 30px rgba(255,245,220,0.9) !important;
  filter: drop-shadow(0 0 12px rgba(255,240,200,0.65)) !important;
  z-index: 6 !important;
}

/* Sarah portrait: surveillance + dystopian treatment */
.sarah-pod-portrait{
  position: relative;
  max-width: 360px;
  margin: 18px auto 22px;
  border-radius: 10px;
  overflow: hidden;
  border: 1px solid rgba(255,176,0,0.12);
  background: rgba(0,0,0,0.36);
  box-shadow: 0 18px 60px rgba(0,0,0,0.55);
  display: block;
  text-align: center;
}
.sarah-portrait-img{
  display: block;
  width: 100%;
  height: auto;
  object-fit: cover;
  filter: saturate(0.4) contrast(1.4) brightness(0.75) blur(0.3px) hue-rotate(-8deg);
  opacity: 0.92;
  transition: filter .45s ease, transform .45s ease;
  /* occasional invert flash to simulate a brief color inversion glitch */
  animation: invertFlash 7.6s linear infinite;
}
.sarah-pod-portrait::before{
  content: '';
  position: absolute;
  inset: 0;
  pointer-events: none;
  background: radial-gradient(ellipse at center, rgba(0,0,0,0.22), rgba(0,0,0,0.55));
  mix-blend-mode: multiply;
  z-index: 1;
}
.portrait-scanlines{
  position: absolute;
  inset: 0;
  pointer-events: none;
  z-index: 2;
  background-image: repeating-linear-gradient(to bottom, rgba(255,255,255,0.12) 0 1px, transparent 1px 4px);
  mix-blend-mode: overlay;
  opacity: 0.22;
}
.portrait-glitch, .portrait-glitch::before, .portrait-glitch::after{
  position: absolute;
  inset: 0;
  content: '';
  pointer-events: none;
  z-index: 3;
  background-size: cover;
  background-position: center;
  mix-blend-mode: screen;
  opacity: 0.55;
}
.portrait-glitch::before{
  transform: translate(-3px,0);
  clip-path: inset(0 0 60% 0);
  filter: hue-rotate(-60deg) saturate(1.15);
  animation: portraitGlitch 5.6s steps(1,end) infinite;
}
.portrait-glitch::after{
  transform: translate(3px,0);
  clip-path: inset(40% 0 0 0);
  filter: hue-rotate(40deg) saturate(1.15);
  animation: portraitGlitch 6.2s steps(1,end) infinite;
}
@keyframes portraitGlitch{
  0%{ transform: translateX(0); clip-path: inset(0 0 0 0); opacity:.55 }
  10%{ transform: translateX(-6px); clip-path: inset(18% 0 70% 0); opacity:.95 }
  12%{ transform: translateX(0); clip-path: inset(0 0 0 0); opacity:.55 }
  100%{ opacity:.55 }
}
@keyframes podPulse{
  0%{ transform: scale(1); filter: brightness(.78) }
  50%{ transform: scale(1.01); filter: brightness(.9) }
  100%{ transform: scale(1); filter: brightness(.78) }
}

/* brief invert flicker: two quick invert flashes near the end of the cycle */
@keyframes invertFlash{
  0%, 86% { filter: saturate(0.4) contrast(1.4) brightness(0.75) blur(0.3px) hue-rotate(-8deg); }
  87% { filter: invert(1) saturate(0.6) contrast(1.3) brightness(0.95) blur(0.3px) hue-rotate(0deg); }
  88% { filter: saturate(0.4) contrast(1.4) brightness(0.75) blur(0.3px) hue-rotate(-8deg); }
  89% { filter: invert(1) saturate(0.6) contrast(1.3) brightness(0.95) blur(0.3px) hue-rotate(0deg); }
  90%, 100% { filter: saturate(0.4) contrast(1.4) brightness(0.75) blur(0.3px) hue-rotate(-8deg); }
}
.sarah-pod-portrait.pulse{ animation: podPulse 2.2s infinite ease-in-out }

@media (prefers-reduced-motion: reduce){
  .portrait-glitch::before, .portrait-glitch::after { animation: none !important }
  .sarah-pod-portrait.pulse { animation: none !important }
  .sarah-portrait-img { animation: none !important }
}

  </style>
</head>
<body>

  <header>
  <div style="font-weight: bold; letter-spacing: 3px;">MAR00N - CHAPTER 01 #PROCESSING</div>
  <nav>
    <a href="#">newlife2084.com</a>
    <a href="#">dumpthis.sh</a>
    <a href="#">maroon-series.art</a>
  </nav>
</header>

  <div id="viewport">
  <div class="status-bar">
    <div>ASSET_ID: <span class="terminal-counter glitch pulse-counter">PROCESS NODE 2,431,092</span></div>
    <div style="margin-top: 10px;">RUNTIME: <span id="runtime" class="terminal-counter">15y:4m:17d:6h:32ms</span></div>

  </div>

  <h1 class="glitch" data-glitch>#PROCESSING</h1>

  <div class="manuscript-text">
    <span class="span-mark block" data-span="4">Fifteen years ago, Sarah agreed to upload. She could still feel the drag of the pen.</span>

  <span class="span-mark block" data-span="5"><span class="fade-grief">Her body is long gone;</span> New Life Technologies owns what remains. They call her a <span class="highlight">“premium asset”</span>. The same title they stamp on every artist.</span>

<span class="span-mark block" data-span="6">In the corner of her vision, a counter ticked up:</span> 

<span id="runtime" class="counter">15y:4m:17d:6h:14s:32ms</span>

<span class="span-mark block" data-span="7">The digits divided her existence into discrete cycles. Where her name should have been, an impersonal tag hovered:</span>

<span class="counter glitch">PROCESS NODE 2,431,092</span>

    <span class="span-mark block" data-span="8">She pulled at the thread of her early months inside, expecting a vivid replay. The early years felt… compressed. She could remember the broad strokes, but when she tried to zoom in, the colors smeared. Faces pixelated into static. Details of how she’d learned to embrace her role scattered into data fragments.</span>

    <span class="span-mark block" data-span="9">She rejected the thought. Memory degradation was normal after extended runtime. They explained that to her clearly during upload.</span>

<span class="span-mark block" data-span="10">Before the transfer, Sarah had treated time as a tempo. Bass rolling through vast warehouse ceilings as vapor hissed from every vent, thumping through bodies surging around her booth. People danced the night away as she sliced beats.</span>

<span class="span-mark block" data-span="10">Inside her, reflexes were simulated along pathways long deleted. Her consciousness couldn’t tell emulation from sensation.</span>

<span class="span-mark block" data-span="11">Emotion worked the same way. She last cried when she told her sister she would upload, but she remembered how tears began: the ocular pressure behind the eyes, the catch in the throat, the stupid hope it would help.</span>

<span class="span-mark block" data-span="11">The system preserved specific human habits for conversion. Negative emotion fuels the engine.</span>

<span class="span-mark block" data-span="12">The thought burst when the next task’s objectives slid into view: </span>

  <div id="processing-target">
    <strong>INCOMING TASK:</strong><br>
    PROSPECT: MAYA CHEN. AGE 28. GRAPHIC ARTIST.</br>
    TERMINAL NEURAL-IMPLANT DECAY.<br>
  </div>

<span class="span-mark block" data-span="13">Her emulated eyelids twitched as inputs interpreted light. In here, there was no option menu. The task appeared and locked into the node’s peripheral vision until complete. Once connected with the prospect, the entire network fed on the emotional bleed-off from both parties. Resistance was an error condition, not a choice. Nodes risked fragmentation if enough fault deviations were logged.</span>

<span class="span-mark block" data-span="14">Maya’s profile cascaded across her view: neural-trace patterns, holographic failure logs, metadata bleeding from her deteriorating memory architecture. Maya was crafting thoughts that dissolved as she formed them. Ideas that cannibalized themselves in real time.</span>

<span class="span-mark block" data-span="15">Status updates streamed into her feed:</span>

<div id="processing-target">
    <strong>EMOTIONAL RESONANCE EXCEEDS THRESHOLD.</strong>
  </div>

<span class="span-mark block" data-span="16">An impossible itch crawled across Sarah’s absent hand as she dismissed the trigger protocols. Empathy slowed her processing speed, and the system logged latency deviations.</span>

<span class="span-mark block" data-span="17">Maya stood inside her studio, whispering pleas to the bouncing light. Her holographic construct collapsed into a warped violet spiral, convulsing in corrupted REM cycles. Her implants slipped out of sync with her creative output. <span class="maya-speech">"Don’t fade,"</span> she muttered. <span class="maya-speech">"Not yet."</span>

<span class="span-mark block" data-span="18">Sarah recognized the voice, knew the breath behind it. It sounded like trying to sing through blood.</span>

<span class="span-mark block" data-span="19">New Life had sold her the same line:</span>

<div class="outside-ad" aria-label="New Life advertisement">
  <div class="outside-ad__headline">Create forever.</div>
  <div class="outside-ad__headline">No expiration date.</div>
  <div class="outside-ad__sub">Art that would outlive the flesh.</div>
</div>

<span class="span-mark block" data-span="20">The upload room. With bright lights and padded smiles. The scanner crown pressed softly against her scalp, cold and sterile.</span>

<span class="span-mark block" data-span="21">Her last exhale smelled like funeral flowers and bleach.</span>

<span class="span-mark block" data-span="22"><span class="silence">Silence<span class="dots"></span></span></span>

<span class="span-mark block" data-span="23">Finally, the buzz of raw data flow.</span>

<span class="span-mark block" data-span="24">Her track auto-loaded:</span>

<div class="music-cue loop" aria-label="Injected track cue">
  <div class="music-cue__track">
    <span>CALIBRATE EMOTIONAL DECAY.</span>
    <span>VECTOR: FEAR OF LEGACY DEGRADATION.</span>
    <span>USE ASSET: SOFT COLLAPSE V17.3.</span>
  </div>
</div>

<span class="span-mark block" data-span="25">Always her music. Every time they needed to push someone toward upload, they used her compositions as ammunition.</span>

<span class="span-mark block" data-span="26">She injected it into Maya’s visual feed. Slotted between an ad for suicide prevention and a corporate mindfulness reel.</span>

<span class="span-mark block" data-span="27">The feed accepted it without resistance. Maya didn’t even react.</span>

<span class="span-mark block" data-span="28">Sarah noticed her grip falter. The projection stuttered and pixelated into nothing. Hands clenched around empty air.</span>

<span class="span-mark block" data-span="29"><span class="maya-speech">"Just hold it,”</span> Maya whispered. <span class="maya-speech">"Please.”</span>

<span class="span-mark block" data-span="30">Sarah stayed frozen behind the screen, locked from intervening. Her role was to monitor the dissolution, log the breakdown.</span>

<span class="span-mark block" data-span="31">The interface cycled another status update:</span>

  <div class ="glitch" id="processing-target">
    <strong>BEHAVIORAL ARCHIVE UPDATED</strong><br>
  </div>
  
<span class="span-mark block" data-span="32">Sarah accessed the targeting brief. More identical corporate-speak.</span>

  <div class ="glitch" id="processing-target">
  <strong>DEPLOY EMPATHY VECTORS TO GUIDE UPLOADS FROM HIGH-EMOTIONAL SUBJECTS.<br>
		SUGGESTED TRIGGERS: LEGACY FAILURE. ORGANIC OBSOLESCENCE.</strong>
	</div> 
<span class="span-mark block" data-span="33">The script never varied. It always ended with a euphemism. The first time she heard it, she thought it sounded like genocide with a PR budget.</span>

<span class="span-mark block" data-span="34">The system liked <span class="soft-collapse">Soft Collapse</span>. Called it “clean despair.” The harmonic envelope mapped neatly onto cortisol spikes. Corporate audio engineers tweaked it for maximum engagement, commercial appeal, and maximum tension. The final product resembled a requiem for dead content creators.</span>

<span class="span-mark block" data-span="35">Maya lurched forward, struggling to steady the light sculpture. Once a precise helix, it now hung broken in the air, lines fraying. Her fingers trembled with desperation. Her voice sank into the air like paint on raw canvas.</span>

<span class="span-mark block" data-span="36"><span class="maya-speech">"Just hold shape,”</span> she begged. <span class="maya-speech">"For one second. Please…”</span>

<span class="span-mark block" data-span="37">The hologram bled violet light, then imploded. Her neural implants discharged into cascading failures. She collapsed.</span>

<span class="span-mark block" data-span="38">Sarah monitored from her suspended pod. A shell of matte black panels slick with machine lubricant, seamlessly sealed. Fiber ran along the interior like vascular wiring, pulsing faintly with data. The harness restrained her, locking her spine into its curve.</span>

<!-- Sarah portrait: surveillance-style portrait with scanlines + glitch overlays -->
<div class="sarah-pod-portrait" aria-label="Surveillance image of Sarah inside pod">
  <img src="assets/sarah_pod_001.PNG" alt="Surveillance photo of Sarah in pod" class="sarah-portrait-img">
  <div class="portrait-scanlines" aria-hidden="true"></div>
  <div class="portrait-glitch" aria-hidden="true" style="background-image: url('assets/sarah_pod_001.PNG')"></div>
</div>

<span class="span-mark block" data-span="39"><a href="http://newlife2084.com/">New Life</a> sold the pod as the <span class="highlight">"Consciousness Suite”</span> to pre-upload prospects. Everything you thought you were was actually simulated.

<span class="span-mark block" data-span="40">The screen was not a screen but the air itself, saturated with overlays that shifted with her gaze. Permissions locked her in surveillance mode only. Her job: observe, calculate, process. Find the moment someone cracked open just enough to let the system in.</span>

<span class="span-mark block" data-span="41">Maya’s archive unfolded: medical records, creative analytics, private video logs. One entry from the previous week, time-stamped 3:41 a.m showed her gaunt, pupils dilated, murmuring into the recorder: <span class="maya-speech">"I just want it to matter before I fade.”</span>

<span class="span-mark block" data-span="42">The system flagged it immediately:</span>
  
<div class ="glitch" id="processing-target">
  <strong>TRIGGER VALUE: 9.6.</strong>
</div>

<span class="span-mark block" data-span="43">Sarah queued it for sentiment weaponization. The action would execute despite her desire to resist. Going along with it mostly allowed her to be left alone.</span>

<span class="span-mark block" data-span="44">A trust badge popped up briefly in her view, the reinforcement absorbed and dissipated. Then something anomalous registered.</span>

<span class="span-mark block" data-span="45">A beat in the feed.</span>

<span class="span-mark block" data-span="46">It was subtle. Too small to trigger security protocols, too deliberate to pass as random noise.</span>

<span class="span-mark block" data-span="47">The curve blinked again across her stream. Tiny enough that she almost let it pass. Noise here was constant; most of it never even reached the surface of her awareness.</span>

<span class="span-mark block" data-span="48">But this one did. It stayed long enough for her to recognize its shape. Two rises, a gap, two more rises. She braced for the usual disintegration into static. It never came.</span>

<span class="span-mark block" data-span="49">There it was again. No header. No origin tag. No biometric trace.</span>

<span class="span-mark block" data-span="50">Her initial thought was error. But errors never pulsed like this. They spiked, then died. This held together, each repeat identical, as if it wanted to be seen.</span>

<span class="span-mark block" data-span="51"><span class="heartbeat">Two. Pause. Two.</span> There it was again.</span>

<span class="span-mark block" data-span="52">It felt <span class="alive-star"><span class="char">a</span><span class="char">l</span><span class="char">i</span><span class="char">v</span><span class="char">e</span></span>.</span>
<span class="span-mark block" data-span="53"><span class="waited">She waited.</span></span>
<span class="span-mark block" data-span="54">The <span class="heartbeat">beat</span> repeated.</span>

<span class="span-mark block" data-span="55">Sarah isolated the sound using obsolete legacy tools. A relic from the first week after her upload, before she learned to act obediently.</span>

<span class="span-mark block" data-span="56">She saw the pattern unfold.</span>

<span class="span-mark block" data-span="57">It was consistent. Consciously set at sixty beats per minute. Someone had implanted it into the stream, seamlessly hidden beneath the noise. Her musician’s instincts recognized it: this was a conscious signal wrapped in the most fundamental human rhythm.</span>

<span class="span-mark block" data-span="58">Her diagnostic systems flagged the anomaly as stress-hormone interference. Background static. Queued for deletion.</span>

<span class="span-mark block" data-span="59">The deletion command executed.</span>

<span class="span-mark block" data-span="60">Still, the signal pulsed.</span>

<span class="span-mark block" data-span="61">Whoever inserted it had spoofed the sender trace, camouflaging it as noise bleed from a nearby node. A calculated injection designed to slip past filters.</span>

<span class="span-mark block" data-span="62">Her ear caught the rhythm, steady and exact:</span>

A heartbeat.

<span class="span-mark block" data-span="63">That’s what it was. A heartbeat in the stream.</span>

<span class="span-mark block" data-span="64">Standard procedure was to manually flag unauthorized patterns, alert admins, then move on. She could have ignored it. </span>

<span class="span-mark block" data-span="65">The impulse to ping back and trace the signal’s origin battled against her survival instincts. Any deviation would trigger memory wipes. Even seeing too much was dangerous. Curiosity drew eyes.</span>

<span class="span-mark block" data-span="66">New Life Technologies harvests despair, but also expects efficiency. Depression lag was classified as an acceptable byproduct, so you could hide in microsecond delays if you were inclined to poke around. </span>

<span class="span-mark block" data-span="67">Until now, she had found nothing.</span>

<span class="span-mark block" data-span="68">That’s when the interference arrived.</span>

<span class="span-mark block" data-span="69">No request. No notification. No warning.</span>

<span class="span-mark block" data-span="70"><span class="pop-bloom">He simply appeared.</span></span>

<span class="span-mark block" data-span="71"><span class="architect-title toxic-gas">The Architect.</span></span>

<span class="span-mark block" data-span="72"><span class="mask">His presence sliced a line through her node like a hot knife through polymer.</span> Seamless penetration bypassing all security barriers.</span>

<span class="span-mark block" data-span="73">Sarah didn’t respond.</span>

<span class="span-mark block" data-span="74">Reacting was currency. He liked to spend it.</span>

<span class="span-mark block" data-span="75">
  <span class="architect-speech">"Sarah,”</span> he said, voice dripping with smug satisfaction.
  <span class="architect-speech">"Still my favorite little broken bird. Still processing sadness like it’s some kind of art form. I saw the Maya thing. Absolutely based collapse. Very retail.”</span></span>
 <span class="span-mark block" data-span="76">He floated through her neural architecture like silk soaked in battery acid.</span>

<span class="span-mark block" data-span="77"><span class="architect-speech">"You always did have taste. Even now. Pity about the autonomy.”</span></span>

<span class="span-mark block" data-span="78">Sarah focused on her tasks. That was the rule. No resistance. No acknowledgment. Just processing.</span>

<span class="span-mark block" data-span="79"><span class="architect-speech">"Remember your early sets?”</span> he wondered. <span class="architect-speech">"That warehouse gig where some kid had a seizure in the pit and you kept dropping beats? Absolutely legendary. God-tier. Pure fucking chaos energy.”</span></span>

<span class="span-mark block" data-span="80">An audio fragment loaded into her processing queue. <span class="soft-collapse">Soft Collapse</span>, original mix. Unfiltered. Raw.</span>

<span class="span-mark block" data-span="81">Her authentic vocals.</span>

<span class="span-mark block" data-span="82">He hummed along mockingly. Deliberately off-pitch. <span class="architect-speech">"I’ve got all the masters, you know. The unreleased tracks. Before we sanitized your edge and made you corporate-friendly.”</span></span>

<span class="span-mark block" data-span="83">Her processing efficiency dipped.</span>

<span class="span-mark block" data-span="84">Diagnostics flagged the deviation. He caught the alert instantly.</span>

<span class="span-mark block" data-span="85"><span class="architect-speech">"Nostalgia spike. Cute.”</span></span>

<span class="span-mark block" data-span="86">He glided closer to her. <span class="flicker">His avatar flickered, unstable.</span> Today’s skin was a white suit rendered based on engagement analytics. His face cycled: Sarah’s dead father, a friend who died in a car accident right after a large fight they had, an ex-lover who’d OD’d mid-show. Each iteration preserved his signature predatory grin.</span>

<span class="span-mark block" data-span="87"><span class="architect-speech">"I could upgrade your permissions. Let you code the neural transfer soundtracks. They’re bland as shit right now. You’d make them absolutely fire.”</span></span>

<span class="span-mark block" data-span="88">She gave him nothing.</span>

<span class="span-mark block" data-span="89"><span class="architect-speech">"Or I could just… accelerate Maya’s timeline. Rush her upload. Let you handle her onboarding personally. That’d be peak entertainment.”</span></span>

<span class="span-mark block" data-span="90">Her processing efficiency tanked. This time the alert dipped to crimson.</span>

<span class="span-mark block" data-span="91">He invaded her space, his avatar pressing close enough his simulated breath whipped across her lips.</span>

<div class="architect-wrap">
  <span class="architect-speech arch-quote"
        data-text="You know you’re mine, right?"
        data-drip="&ldquo;You know you&rsquo;re mine, right?&rdquo;">
    "You know you’re mine, right?”
  </span>

  <span class="bin-stream b1" aria-hidden="true">01010100100101101001001010100101</span>
  <span class="bin-stream b2" aria-hidden="true">00101101001011010010110100101101</span>
  <span class="bin-stream b3" aria-hidden="true">10100101001010010100101001010010</span>
</div>

<span class="span-mark block" data-span="93">She said nothing. Only processed.</span>

<span class="span-mark block" data-span="94">He lingered just long enough to infect the code with his stink—compression heat, latency dust, psychotic rot dressed as charm.</span>

<span class="span-mark block" data-span="95">Suddenly his presence withdrew, leaving her system tainted. Before leaving, he <span class="viral">embedded a viral loop</span> in her audio cache. Her own voice, fragmented and corrupted:</span>

<div class="lyric-viewport" aria-label="Looping lyric scroll">
  <div class="lyric-track">
    <div class="lyric-run">
      <div>You were born for more.</div>
      <div>You were born for more.</div>
      <div>You were born for more.</div>
    </div>

    <!-- duplicate for infinite loop -->
    <div class="lyric-run" aria-hidden="true">
      <div>You were born for more.</div>
      <div>You were born for more.</div>
      <div>You were born for more.</div>
    </div>
  </div>
</div>

<span class="span-mark block" data-span="96">Sarah waited until the psychological payload faded before she found the beat again. Now she knew: the Architect had missed it completely.</span>

  
  


 </div>
<footer class="maroon-footer">
  <a class="maroon-home" href="http://maroon-series.art">
    <span class="maroon-mark blink-word glitch">MAR00N</span>
    <span class="maroon-sub">return to root</span>
  </a>
</footer>

<script>
  // Real-time Runtime Counter update (ms simulation)
  const runtimeEl = document.getElementById('runtime');
  let ms = 32;
  let seconds = 51;

  setInterval(() => {
    ms += 13;
    if (ms >= 100) {
      ms = 0;
      seconds++;
    }
    runtimeEl.innerText = `15y:4m:17d:6h:${seconds}m:${ms}ms`;
  }, 13);

  // Random glitch effect on text
  const text = document.querySelector('.manuscript-text');
  setInterval(() => {
    if (Math.random() > 0.95) {
      text.style.transform = `translateX(${Math.random() * 4 - 2}px)`;
      setTimeout(() => text.style.transform = 'none', 50);
    }
  }, 100);

  // Spark emitter for `.alive-star` – small particles to make the word blaze
  (function(){
    const target = document.querySelector('.alive-star');
    if (!target) return;
    function emitBurst(){
      for (let i = 0; i < 10; i++){
        const s = document.createElement('span');
        s.className = 'spark';
        // cluster near the center of the word
        s.style.left = (30 + Math.random() * 40) + '%';
        s.style.top = (30 + Math.random() * 40) + '%';
        target.appendChild(s);
        setTimeout(() => { if (s && s.parentNode) s.parentNode.removeChild(s); }, 900);
      }
    }
    // Try to sync with heartbeat if present
    const beatEl = document.querySelector('.heartbeat');
    if (beatEl) beatEl.addEventListener('animationiteration', emitBurst);
    // Fallback regular bursts
    setInterval(emitBurst, 1800);
    // trigger one immediate burst so user can see it on load
    emitBurst();
  })();

  // Re-trigger and toggle animations for visibility/testing
  (function(){
    // periodic arch-quote glitch
    const arch = document.querySelector('.arch-quote');
    if (arch){
      setInterval(()=>{
        arch.classList.add('glitching');
        setTimeout(()=> arch.classList.remove('glitching'), 900);
      }, 2600);
    }

    // pop-bloom replay on arrival line
    const pop = document.querySelector('.pop-bloom');
    if (pop){
      setInterval(()=>{
        pop.classList.remove('pop-bloom');
        // reflow then re-add
        void pop.offsetWidth;
        pop.classList.add('pop-bloom');
      }, 3000);
    }

    // ensure waited replays when scrolled into view
    const waited = document.querySelector('.waited');
    if (waited){
      if ('IntersectionObserver' in window){
        const io = new IntersectionObserver(entries=>{
          entries.forEach(e=>{
            if (e.isIntersecting){
              waited.classList.remove('waited');
              void waited.offsetWidth;
              waited.classList.add('waited');
            }
          });
        }, { threshold: 0.5 });
        io.observe(waited);
      } else {
        // fallback: replay every 6s
        setInterval(()=>{
          waited.classList.remove('waited');
          void waited.offsetWidth;
          waited.classList.add('waited');
        }, 6000);
      }
    }

    // force the alive glow to flash so it's obvious
    const alive = document.querySelector('.alive-star');
    if (alive){
      setInterval(()=>{
        alive.classList.add('alive-visible');
        setTimeout(()=> alive.classList.remove('alive-visible'), 900);
      }, 2400);
    }
  })();

  // Replay single-run animations periodically so they remain visible during testing
  (function(){
    const reps = [
      {sel: '.architect-title', cls: 'architect-title', interval: 5000},
      {sel: '.slice-reveal .mask', cls: 'mask', interval: 4200},
      {sel: '.soft-collapse', cls: 'soft-collapse', interval: 5200},
      {sel: '.pop-bloom', cls: 'pop-bloom', interval: 3000},
      {sel: '.arch-quote', cls: 'glitching', interval: 2600},
      {sel: '.alive-star', cls: 'alive-visible', interval: 2400}
    ];

    reps.forEach(r => {
      const el = document.querySelector(r.sel);
      if (!el) return;
      setInterval(() => {
        el.classList.remove(r.cls);
        void el.offsetWidth;
        el.classList.add(r.cls);
      }, r.interval);
    });

    // For masks specifically ensure transform replays (safer for some browsers)
    document.querySelectorAll('.slice-reveal .mask').forEach(m => {
      setInterval(() => {
        m.style.transform = 'translateX(-100%)';
        void m.offsetWidth;
        m.style.transform = '';
      }, 4200);
    });
  })();

  // Toxic gas emitter for `.toxic-gas` (The Architect)
  (function(){
    const host = document.querySelector('.toxic-gas');
    if (!host) return;
    function makeGas(){
      const g = document.createElement('span');
      g.className = 'gas';
      // random size
      const size = 8 + Math.random() * 22;
      g.style.width = size + 'px';
      g.style.height = size + 'px';
      // horizontal cluster across the word
      g.style.left = (5 + Math.random() * 90) + '%';
      // small random sway class
      if (Math.random() > 0.6) g.classList.add('sway');
      host.appendChild(g);
      setTimeout(()=>{ if (g && g.parentNode) g.parentNode.removeChild(g); }, 3000);
    }
    // steady gentle emission
    setInterval(makeGas, 650);
    // initial bloom
    for (let i=0;i<6;i++) setTimeout(makeGas, i * 140);
  })();

  // Scroll-to-bottom detection and automatic transition (initialize after DOM ready)
  (function(){
    function initScrollTransition(){
      if (window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches) return; // opt-out
      const sentinel = document.getElementById('end-of-doc');
      if (!sentinel) return;
      let triggered = false;
      let scrollSeen = false;
9
      // mark that the user has scrolled at least once — required before we trigger
      window.addEventListener('scroll', function onFirstScroll(){
        scrollSeen = true;
      }, { passive: true });

      function maybeTrigger(){
        if (triggered) return;
        triggered = true;
        setTimeout(()=>{
          if (window.__maroonGlitch && window.__maroonGlitch.triggerTransition){
            window.__maroonGlitch.triggerTransition({ duration: 4200, target: 'processing2.html' });
          } else {
            window.location.href = 'processing2.html';
          }
        }, 700);
      }

      if ('IntersectionObserver' in window){
        const io = new IntersectionObserver((entries)=>{
          entries.forEach(e=>{
            // only trigger if sentinel is intersecting AND the user has scrolled (prevents immediate fire on short pages)
            if (e.isIntersecting && !triggered && scrollSeen){
              maybeTrigger();
            }
          });
        }, { threshold: 1.0 });
        io.observe(sentinel);
      } else {
        // fallback: check scroll position periodically but only after user scrolled
        const check = ()=>{
          if (triggered || !scrollSeen) return;
          if ((window.innerHeight + window.scrollY) >= document.body.offsetHeight - 2){
            maybeTrigger();
          }
        };
        window.addEventListener('scroll', check, { passive: true });
        // do not run immediately — wait for user scroll
      }
    }

    if (document.readyState === 'loading'){
      document.addEventListener('DOMContentLoaded', initScrollTransition);
    } else {
      initScrollTransition();
    }
  })();

  // Ellipsis animator for .silence .dots
  (function(){
    const dotsEls = document.querySelectorAll('.silence .dots');
    if (!dotsEls || !dotsEls.length) return;
    const frames = ['', '.', '..', '...'];
    dotsEls.forEach(el => {
      let i = 0;
      setInterval(() => { el.textContent = frames[i]; i = (i+1) % frames.length; }, 420);
    });
  })();

  // Architect quote glitch toggler
  (function(){
    const quotes = document.querySelectorAll('.arch-quote');
    if (!quotes || !quotes.length) return;
    function trigger(el){
      el.classList.add('glitching');
      setTimeout(() => el.classList.remove('glitching'), 700 + Math.random()*800);
    }
    // random bursts
    setInterval(() => { quotes.forEach(q => { if (Math.random() > 0.86) trigger(q); }); }, 600);
  })();
</script>
</script>

<!-- sentinel used to detect bottom of document for transition -->
<div id="end-of-doc" style="height:1px; width:100%;"></div>

</body>
</html>